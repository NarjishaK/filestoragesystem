(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[566],{1584:(e,r,t)=>{"use strict";t.d(r,{default:()=>d});var a=t(5155),s=t(4514),o=t(6874),n=t.n(o),i=t(2115),l=t(4752),c=t.n(l);let d=()=>{let[e,r]=(0,i.useState)(1),[t,o]=(0,i.useState)(!1),[l,d]=(0,i.useState)({email:"",otp:"",newPassword:"",confirmPassword:""}),u=e=>{let{name:r,value:t}=e.target;d(e=>({...e,[r]:t}))},m=async e=>{if(e.preventDefault(),!l.email){c().fire({icon:"error",title:"Error",text:"Please enter your email address!"});return}o(!0);try{let e=await fetch("".concat(s.C1,"/customer/forgot-password"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:l.email})}),t=await e.json();e.ok?(c().fire({icon:"success",title:"OTP Sent!",text:"Please check your email for the OTP code."}),r(2)):c().fire({icon:"error",title:"Error",text:t.message||"Failed to send OTP. Please try again."})}catch(e){console.error("Error sending OTP:",e),c().fire({icon:"error",title:"Error",text:"Network error. Please try again."})}finally{o(!1)}},f=async e=>{if(e.preventDefault(),!l.otp){c().fire({icon:"error",title:"Error",text:"Please enter the OTP code!"});return}o(!0);try{let e=await fetch("".concat(s.C1,"/customer/verify-otp"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:l.email,otp:l.otp})}),t=await e.json();e.ok?(c().fire({icon:"success",title:"OTP Verified!",text:"Now you can reset your password."}),r(3)):c().fire({icon:"error",title:"Error",text:t.message||"Invalid OTP. Please try again."})}catch(e){console.error("Error verifying OTP:",e),c().fire({icon:"error",title:"Error",text:"Network error. Please try again."})}finally{o(!1)}},h=async e=>{if(e.preventDefault(),!l.newPassword||!l.confirmPassword){c().fire({icon:"error",title:"Error",text:"Please fill in both password fields!"});return}if(l.newPassword!==l.confirmPassword){c().fire({icon:"error",title:"Error",text:"Passwords do not match!"});return}if(l.newPassword.length<6){c().fire({icon:"error",title:"Error",text:"Password must be at least 6 characters long!"});return}o(!0);try{let e=await fetch("".concat(s.C1,"/customer/reset-password"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:l.email,newPassword:l.newPassword})}),r=await e.json();e.ok?c().fire({icon:"success",title:"Success!",text:"Your password has been reset successfully!"}).then(()=>{window.location.href="/signin"}):c().fire({icon:"error",title:"Error",text:r.message||"Failed to reset password. Please try again."})}catch(e){console.error("Error resetting password:",e),c().fire({icon:"error",title:"Error",text:"Network error. Please try again."})}finally{o(!1)}},g=()=>{switch(e){case 1:return"Enter your email to receive an OTP";case 2:return"Enter the OTP sent to your email";case 3:return"Enter your new password";default:return""}};return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,a.jsx)("section",{className:"overflow-hidden py-20 bg-gray-2",children:(0,a.jsx)("div",{className:"max-w-[1170px] w-full mx-auto px-4 sm:px-8 xl:px-0",children:(0,a.jsxs)("div",{className:"max-w-[570px] w-full mx-auto rounded-xl bg-white shadow-1 p-4 sm:p-7.5 xl:p-11",children:[(0,a.jsxs)("div",{className:"text-center mb-11",children:[(0,a.jsx)("h2",{className:"font-semibold text-xl sm:text-2xl xl:text-heading-5 text-dark mb-1.5",children:(()=>{switch(e){case 1:default:return"Forgot Password";case 2:return"Verify OTP";case 3:return"Reset Password"}})()}),g()&&(0,a.jsx)("p",{className:"text-sm text-gray-600",children:g()}),(0,a.jsx)("div",{className:"flex justify-center mt-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ".concat(e>=1?"bg-blue text-white":"bg-gray-200 text-gray-500"),children:"1"}),(0,a.jsx)("div",{className:"w-6 h-0.5 ".concat(e>=2?"bg-blue":"bg-gray-200")}),(0,a.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ".concat(e>=2?"bg-blue text-white":"bg-gray-200 text-gray-500"),children:"2"}),(0,a.jsx)("div",{className:"w-6 h-0.5 ".concat(e>=3?"bg-blue":"bg-gray-200")}),(0,a.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ".concat(e>=3?"bg-blue text-white":"bg-gray-200 text-gray-500"),children:"3"})]})})]}),(0,a.jsxs)("div",{children:[(()=>{switch(e){case 1:return(0,a.jsxs)("form",{onSubmit:m,children:[(0,a.jsx)("div",{className:"mb-5",children:(0,a.jsx)("input",{type:"email",name:"email",value:l.email,onChange:u,placeholder:"Enter your email",className:"rounded-lg border border-gray-3 bg-gray-1 placeholder:text-dark-5 w-full py-3 px-5 outline-none duration-200 focus:border-transparent focus:shadow-input focus:ring-2 focus:ring-blue/20",required:!0})}),(0,a.jsx)("button",{type:"submit",disabled:t,className:"w-full flex justify-center font-medium text-white bg-dark py-3 px-6 rounded-lg ease-out duration-200 hover:bg-blue disabled:opacity-50 disabled:cursor-not-allowed",children:t?"Sending...":"Send OTP to Email"})]});case 2:return(0,a.jsxs)("form",{onSubmit:f,children:[(0,a.jsxs)("div",{className:"mb-5",children:[(0,a.jsxs)("p",{className:"text-sm text-gray-600 mb-3",children:["OTP has been sent to: ",(0,a.jsx)("strong",{children:l.email})]}),(0,a.jsx)("input",{type:"text",name:"otp",value:l.otp,onChange:u,placeholder:"Enter OTP code",className:"rounded-lg border border-gray-3 bg-gray-1 placeholder:text-dark-5 w-full py-3 px-5 outline-none duration-200 focus:border-transparent focus:shadow-input focus:ring-2 focus:ring-blue/20",required:!0})]}),(0,a.jsx)("button",{type:"submit",disabled:t,className:"w-full flex justify-center font-medium text-white bg-dark py-3 px-6 rounded-lg ease-out duration-200 hover:bg-blue disabled:opacity-50 disabled:cursor-not-allowed",children:t?"Verifying...":"Verify OTP"}),(0,a.jsx)("button",{type:"button",onClick:()=>r(1),className:"w-full mt-3 text-sm text-gray-600 hover:text-blue",children:"← Back to email verification"})]});case 3:return(0,a.jsxs)("form",{onSubmit:h,children:[(0,a.jsx)("div",{className:"mb-5",children:(0,a.jsx)("input",{type:"password",name:"newPassword",value:l.newPassword,onChange:u,placeholder:"Enter new password",className:"rounded-lg border border-gray-3 bg-gray-1 placeholder:text-dark-5 w-full py-3 px-5 outline-none duration-200 focus:border-transparent focus:shadow-input focus:ring-2 focus:ring-blue/20",required:!0})}),(0,a.jsx)("div",{className:"mb-5",children:(0,a.jsx)("input",{type:"password",name:"confirmPassword",value:l.confirmPassword,onChange:u,placeholder:"Confirm new password",className:"rounded-lg border border-gray-3 bg-gray-1 placeholder:text-dark-5 w-full py-3 px-5 outline-none duration-200 focus:border-transparent focus:shadow-input focus:ring-2 focus:ring-blue/20",required:!0})}),(0,a.jsx)("button",{type:"submit",disabled:t,className:"w-full flex justify-center font-medium text-white bg-dark py-3 px-6 rounded-lg ease-out duration-200 hover:bg-blue disabled:opacity-50 disabled:cursor-not-allowed",children:t?"Resetting...":"Reset Password"})]});default:return null}})(),(0,a.jsxs)("p",{className:"text-center mt-6",children:["Remember your password?",(0,a.jsx)(n(),{href:"/signin",className:"text-dark ease-out duration-200 hover:text-blue pl-2",children:"Sign In"})]})]})]})})})})})}},4514:(e,r,t)=>{"use strict";t.d(r,{C1:()=>n,Lp:()=>m,QM:()=>i,Sh:()=>l,Uq:()=>d,Ww:()=>u,z5:()=>c});var a=t(3464),s=t(4752),o=t.n(s);let n="https://api.filestorage.zyva-designs.com",i=async e=>{try{let r=localStorage.getItem("token"),t=await a.A.post("".concat(n,"/filestorage"),e,{headers:{Authorization:"Bearer ".concat(r)}});return o().fire("Success","File uploaded successfully","success"),t.data}catch(e){o().fire("Error","Failed to upload file","error"),console.error(e)}},l=async e=>(await a.A.post("".concat(n,"/customer/login"),e)).data,c=async e=>(await a.A.post("".concat(n,"/customer"),e)).data,d=async()=>{let e=JSON.parse(localStorage.getItem("customerDetails")),r=null==e?void 0:e._id,t=localStorage.getItem("token");return(await a.A.get("".concat(n,"/filestorage"),{params:{customerId:r},headers:{Authorization:"Bearer ".concat(t)}})).data},u=async(e,r)=>{if((await o().fire({title:"Are you sure?",text:"This file will be permanently deleted!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"})).isConfirmed)try{let t=localStorage.getItem("token"),s=await a.A.delete("".concat(n,"/filestorage/").concat(e),{headers:{Authorization:"Bearer ".concat(t)}});return o().fire("Deleted!","The file has been deleted.","success"),r&&r(),s.data}catch(e){o().fire("Error!","Something went wrong while deleting.","error"),console.error(e)}},m=async e=>{let r=localStorage.getItem("token");return(await a.A.get("".concat(n,"/filestorage/").concat(e),{headers:{Authorization:"Bearer ".concat(r)}})).data}},5833:(e,r,t)=>{Promise.resolve().then(t.bind(t,1584))}},e=>{var r=r=>e(e.s=r);e.O(0,[320,464,874,441,684,358],()=>r(5833)),_N_E=e.O()}]);