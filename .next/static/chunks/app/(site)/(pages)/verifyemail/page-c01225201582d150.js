(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{3257:(e,t,a)=>{"use strict";a.d(t,{default:()=>c});var r=a(5155),s=a(2115),i=a(8999),o=a(4752),n=a.n(o),l=a(4514);let c=()=>{let[e,t]=(0,s.useState)("verifying"),[a,o]=(0,s.useState)(""),[c,d]=(0,s.useState)(!1),m=(0,i.useSearchParams)(),u=(0,i.useRouter)(),h=m.get("token");(0,s.useEffect)(()=>{h?x(h):(t("error"),o("Invalid verification link"))},[h]);let x=async e=>{try{let a=await fetch("".concat(l.C1,"/customer/verifyemail/customer?token=").concat(e),{method:"GET",headers:{"Content-Type":"application/json"}}),r=await a.json();a.ok?(t("success"),o(r.message),setTimeout(()=>{n().fire({icon:"success",title:"Email Verified!",text:"Your account is now active. You can sign in now.",confirmButtonText:"Go to Sign In"}).then(()=>{u.push("/signin")})},2e3)):(t("error"),o(r.message||"Email verification failed"))}catch(e){console.error("Error verifying email:",e),t("error"),o("Something went wrong. Please try again.")}},g=async()=>{let{value:e}=await n().fire({title:"Resend Verification Email",input:"email",inputLabel:"Enter your email address",inputPlaceholder:"your.email@example.com",showCancelButton:!0,confirmButtonText:"Send",cancelButtonText:"Cancel",inputValidator:e=>e?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)?void 0:"Please enter a valid email address!":"You need to enter an email address!"});if(e){d(!0);try{let t=await fetch("".concat(l.C1,"/customer/resend-verification"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e})}),a=await t.json();t.ok?n().fire({icon:"success",title:"Email Sent!",text:"Please check your email for the new verification link."}):n().fire({icon:"error",title:"Failed to Send",text:a.message||"Failed to send verification email"})}catch(e){console.error("Error resending verification:",e),n().fire({icon:"error",title:"Error",text:"Something went wrong. Please try again."})}finally{d(!1)}}};return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,r.jsx)("section",{className:"overflow-hidden py-20 bg-gray-2",children:(0,r.jsx)("div",{className:"max-w-[1170px] w-full mx-auto px-4 sm:px-8 xl:px-0",children:(0,r.jsx)("div",{className:"max-w-[570px] w-full mx-auto rounded-xl bg-white shadow-1 p-4 sm:p-7.5 xl:p-11",children:(()=>{switch(e){case"verifying":return(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"mb-6",children:(0,r.jsxs)("svg",{className:"animate-spin mx-auto h-12 w-12 text-blue",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),(0,r.jsx)("h2",{className:"font-semibold text-xl sm:text-2xl text-dark mb-2",children:"Verifying Your Email..."}),(0,r.jsx)("p",{className:"text-gray-600",children:"Please wait while we verify your email address."})]});case"success":return(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"mb-6",children:(0,r.jsx)("svg",{className:"mx-auto h-12 w-12 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,r.jsx)("h2",{className:"font-semibold text-xl sm:text-2xl text-dark mb-2",children:"Email Verified Successfully!"}),(0,r.jsx)("p",{className:"text-gray-600 mb-6",children:a}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Redirecting you to sign in page..."})]});case"error":return(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"mb-6",children:(0,r.jsx)("svg",{className:"mx-auto h-12 w-12 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16c-.77.833.192 2.5 1.732 2.5z"})})}),(0,r.jsx)("h2",{className:"font-semibold text-xl sm:text-2xl text-dark mb-2",children:"Verification Failed"}),(0,r.jsx)("p",{className:"text-gray-600 mb-6",children:a}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)("button",{onClick:g,disabled:c,className:"w-full bg-blue text-white py-3 px-6 rounded-lg hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:c?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Sending..."]}):"Resend Verification Email"}),(0,r.jsx)("button",{onClick:()=>u.push("/"),className:"w-full bg-gray-500 text-white py-3 px-6 rounded-lg hover:bg-gray-600",children:"Go to Homepage"})]})]});default:return null}})()})})})})})}},4514:(e,t,a)=>{"use strict";a.d(t,{C1:()=>o,Lp:()=>u,QM:()=>n,Sh:()=>l,Uq:()=>d,Ww:()=>m,z5:()=>c});var r=a(3464),s=a(4752),i=a.n(s);let o="https://api.filestorage.zyva-designs.com",n=async e=>{try{let t=localStorage.getItem("token"),a=await r.A.post("".concat(o,"/filestorage"),e,{headers:{Authorization:"Bearer ".concat(t)}});return i().fire("Success","File uploaded successfully","success"),a.data}catch(e){i().fire("Error","Failed to upload file","error"),console.error(e)}},l=async e=>(await r.A.post("".concat(o,"/customer/login"),e)).data,c=async e=>(await r.A.post("".concat(o,"/customer"),e)).data,d=async()=>{let e=JSON.parse(localStorage.getItem("customerDetails")),t=null==e?void 0:e._id,a=localStorage.getItem("token");return(await r.A.get("".concat(o,"/filestorage"),{params:{customerId:t},headers:{Authorization:"Bearer ".concat(a)}})).data},m=async(e,t)=>{if((await i().fire({title:"Are you sure?",text:"This file will be permanently deleted!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"})).isConfirmed)try{let a=localStorage.getItem("token"),s=await r.A.delete("".concat(o,"/filestorage/").concat(e),{headers:{Authorization:"Bearer ".concat(a)}});return i().fire("Deleted!","The file has been deleted.","success"),t&&t(),s.data}catch(e){i().fire("Error!","Something went wrong while deleting.","error"),console.error(e)}},u=async e=>{let t=localStorage.getItem("token");return(await r.A.get("".concat(o,"/filestorage/").concat(e),{headers:{Authorization:"Bearer ".concat(t)}})).data}},5730:(e,t,a)=>{Promise.resolve().then(a.bind(a,3257))}},e=>{var t=t=>e(e.s=t);e.O(0,[320,464,441,684,358],()=>t(5730)),_N_E=e.O()}]);