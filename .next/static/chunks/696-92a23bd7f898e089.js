(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[696],{3610:(e,t,a)=>{"use strict";a.d(t,{default:()=>c});var r=a(5155),l=a(6874),s=a.n(l),o=a(2115),i=a(4514),n=a(4752),d=a.n(n);let c=()=>{let[e,t]=(0,o.useState)({email:"",password:""}),a=async t=>{if(t.preventDefault(),!e.email||!e.password){d().fire({icon:"error",title:"Oops...",text:"Email and password are required!"});return}try{let t=await (0,i.Sh)({email:e.email,password:e.password});t.token?(localStorage.setItem("token",t.token),localStorage.setItem("customerDetails",JSON.stringify(t.customerDetails)),window.location.href="/"):"Your account is blocked"===t.message?d().fire({icon:"error",title:"Account Blocked",text:"Your account has been blocked. Please contact support."}):t.emailNotVerified?d().fire({icon:"warning",title:"Email Not Verified",text:t.message||"Please verify your email before logging in. Check your Email for the verification link.",showCancelButton:!0,confirmButtonText:"OKAY",cancelButtonText:"OK"}).then(t=>{t.isConfirmed&&console.log("Resend verification email for:",e.email)}):d().fire({icon:"error",title:"Oops...",text:"Invalid credentials!"})}catch(t){if(t.response&&t.response.data){let{emailNotVerified:a,message:r}=t.response.data;a?d().fire({icon:"warning",title:"Email Not Verified",text:r||"Please verify your email before logging in. Check your Email for the verification link.",showCancelButton:!0,confirmButtonText:"OKAY",cancelButtonText:"OK"}).then(t=>{t.isConfirmed&&console.log("Resend verification email for:",e.email)}):d().fire({icon:"error",title:"Oops...",text:r||"Login failed. Please try again."})}else d().fire({icon:"error",title:"Oops...",text:"Login failed. Please check your credentials and try again."})}};return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,r.jsx)("section",{className:"overflow-hidden py-20 bg-gray-2",children:(0,r.jsx)("div",{className:"max-w-[1170px] w-full mx-auto px-4 sm:px-8 xl:px-0",children:(0,r.jsxs)("div",{className:"max-w-[570px] w-full mx-auto rounded-xl bg-white shadow-1 p-4 sm:p-7.5 xl:p-11",children:[(0,r.jsxs)("div",{className:"text-center mb-11",children:[(0,r.jsx)("h2",{className:"font-semibold text-xl sm:text-2xl xl:text-heading-5 text-dark mb-1.5",children:"Sign In to Your Account"}),(0,r.jsx)("p",{children:"Enter your detail below"})]}),(0,r.jsx)("div",{children:(0,r.jsxs)("form",{onSubmit:a,children:[(0,r.jsxs)("div",{className:"mb-5",children:[(0,r.jsx)("label",{htmlFor:"email",className:"block mb-2.5",children:"Email"}),(0,r.jsx)("input",{type:"email",name:"email",onChange:a=>t({...e,email:a.target.value}),id:"email",placeholder:"Enter your email",className:"rounded-lg border border-gray-3 bg-gray-1 placeholder:text-dark-5 w-full py-3 px-5 outline-none duration-200 focus:border-transparent focus:shadow-input focus:ring-2 focus:ring-blue/20"})]}),(0,r.jsxs)("div",{className:"mb-5",children:[(0,r.jsx)("label",{htmlFor:"password",className:"block mb-2.5",children:"Password"}),(0,r.jsx)("input",{type:"password",name:"password",id:"password",onChange:a=>t({...e,password:a.target.value}),placeholder:"Enter your password",autoComplete:"on",className:"rounded-lg border border-gray-3 bg-gray-1 placeholder:text-dark-5 w-full py-3 px-5 outline-none duration-200 focus:border-transparent focus:shadow-input focus:ring-2 focus:ring-blue/20"})]}),(0,r.jsx)("button",{type:"submit",className:"w-full flex justify-center font-medium text-white bg-dark py-3 px-6 rounded-lg ease-out duration-200 hover:bg-blue mt-7.5",children:"Sign in to account"}),(0,r.jsx)("a",{href:"/forgetpassword",className:"block text-center text-dark-4 mt-4.5 ease-out duration-200 hover:text-dark",children:"Forget your password?"}),(0,r.jsxs)("p",{className:"text-center mt-6",children:["Don't have an account?",(0,r.jsx)(s(),{href:"/signup",className:"text-dark ease-out duration-200 hover:text-blue pl-2",children:"Sign Up Now!"})]})]})})]})})})})})}},4514:(e,t,a)=>{"use strict";a.d(t,{C1:()=>o,Lp:()=>u,QM:()=>i,Sh:()=>n,Uq:()=>c,Ww:()=>m,z5:()=>d});var r=a(3464),l=a(4752),s=a.n(l);let o="https://api.filestorage.zyva-designs.com",i=async e=>{try{let t=localStorage.getItem("token"),a=await r.A.post("".concat(o,"/filestorage"),e,{headers:{Authorization:"Bearer ".concat(t)}});return s().fire("Success","File uploaded successfully","success"),a.data}catch(e){s().fire("Error","Failed to upload file","error"),console.error(e)}},n=async e=>(await r.A.post("".concat(o,"/customer/login"),e)).data,d=async e=>(await r.A.post("".concat(o,"/customer"),e)).data,c=async()=>{let e=JSON.parse(localStorage.getItem("customerDetails")),t=null==e?void 0:e._id,a=localStorage.getItem("token");return(await r.A.get("".concat(o,"/filestorage"),{params:{customerId:t},headers:{Authorization:"Bearer ".concat(a)}})).data},m=async(e,t)=>{if((await s().fire({title:"Are you sure?",text:"This file will be permanently deleted!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"})).isConfirmed)try{let a=localStorage.getItem("token"),l=await r.A.delete("".concat(o,"/filestorage/").concat(e),{headers:{Authorization:"Bearer ".concat(a)}});return s().fire("Deleted!","The file has been deleted.","success"),t&&t(),l.data}catch(e){s().fire("Error!","Something went wrong while deleting.","error"),console.error(e)}},u=async e=>{let t=localStorage.getItem("token");return(await r.A.get("".concat(o,"/filestorage/").concat(e),{headers:{Authorization:"Bearer ".concat(t)}})).data}},4696:(e,t,a)=>{Promise.resolve().then(a.bind(a,5270))},5270:(e,t,a)=>{"use strict";a.d(t,{default:()=>P});var r=a(5155),l=a(2115);let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),o=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase()),i=e=>{let t=o(e);return t.charAt(0).toUpperCase()+t.slice(1)},n=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim()},d=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var c={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let m=(0,l.forwardRef)((e,t)=>{let{color:a="currentColor",size:r=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:i="",children:m,iconNode:u,...h}=e;return(0,l.createElement)("svg",{ref:t,...c,width:r,height:r,stroke:a,strokeWidth:o?24*Number(s)/Number(r):s,className:n("lucide",i),...!m&&!d(h)&&{"aria-hidden":"true"},...h},[...u.map(e=>{let[t,a]=e;return(0,l.createElement)(t,a)}),...Array.isArray(m)?m:[m]])}),u=(e,t)=>{let a=(0,l.forwardRef)((a,r)=>{let{className:o,...d}=a;return(0,l.createElement)(m,{ref:r,iconNode:t,className:n("lucide-".concat(s(i(e))),"lucide-".concat(e),o),...d})});return a.displayName=i(e),a},h=u("folder-plus",[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]),x=u("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]),p=u("grid-3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]),g=u("list",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]),f=u("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),b=u("file",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]),v=u("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),y=u("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),w=u("video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]),j=u("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]),N=u("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]),k=u("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),C=e=>{var t;let{searchTerm:a,onSearchChange:s,fileFilter:o,onFilterChange:i}=e,[n,d]=(0,l.useState)(!1),c=[{value:"all",label:"All Files",icon:(0,r.jsx)(b,{className:"w-4 h-4"})},{value:"images",label:"Images",icon:(0,r.jsx)(v,{className:"w-4 h-4"})},{value:"documents",label:"Documents",icon:(0,r.jsx)(y,{className:"w-4 h-4"})},{value:"videos",label:"Videos",icon:(0,r.jsx)(w,{className:"w-4 h-4"})},{value:"others",label:"Others",icon:(0,r.jsx)(b,{className:"w-4 h-4"})}];return(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsxs)("div",{className:"relative flex-1",children:[(0,r.jsx)(j,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-dark-4"}),(0,r.jsx)("input",{type:"text",placeholder:"Search files and folders...",value:a,onChange:e=>s(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-3 rounded-md focus:border-blue focus:ring-2 focus:ring-blue/20 focus:outline-none"})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("button",{onClick:()=>d(!n),className:"flex items-center gap-2 px-4 py-2 bg-white border border-gray-3 rounded-md hover:bg-gray-1 duration-200",children:[(0,r.jsx)(N,{className:"w-4 h-4"}),null===(t=c.find(e=>e.value===o))||void 0===t?void 0:t.label,(0,r.jsx)(k,{className:"w-4 h-4 duration-200 ".concat(n?"rotate-180":"")})]}),n&&(0,r.jsx)("div",{className:"absolute top-full left-0 mt-2 w-48 bg-white border border-gray-3 rounded-md shadow-2 z-10 py-2",children:c.map(e=>(0,r.jsxs)("button",{onClick:()=>{i(e.value),d(!1)},className:"w-full flex items-center gap-3 px-4 py-2 text-left hover:bg-gray-1 duration-200 ".concat(o===e.value?"bg-blue/10 text-blue":"text-dark-3"),children:[e.icon,e.label]},e.value))})]})]})},S=u("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),M=e=>{let{currentFolder:t,folders:a,onNavigate:l,className:s="",separator:o=(0,r.jsx)(S,{className:"w-4 h-4 text-dark-4"})}=e,i=(()=>{let e=[{id:null,name:"Home",isClickable:!0}];if(!t)return e;let r=e=>{let t=a.find(t=>t.id===e);if(!t)return[];let l=[];return t.parentId&&l.push(...r(t.parentId)),l.push({id:t.id,name:t.name,isClickable:!0}),l};return[...e,...r(t)]})();return t?(0,r.jsx)("div",{className:"mb-6",children:(0,r.jsx)("nav",{className:"flex items-center gap-2 text-sm ".concat(s),"aria-label":"Breadcrumb",children:(0,r.jsx)("ol",{className:"flex items-center gap-2",children:i.map((e,t)=>{let a=t===i.length-1;return(0,r.jsxs)("li",{className:"flex items-center gap-2",children:[e.isClickable&&!a?(0,r.jsx)("button",{onClick:()=>l(e.id),className:"text-blue hover:underline transition-colors duration-200","aria-current":a?"page":void 0,children:e.name}):(0,r.jsx)("span",{className:a?"text-dark font-medium":"text-dark-4",children:e.name}),!a&&(0,r.jsx)("span",{className:"flex items-center","aria-hidden":"true",children:o})]},e.id||"home")})})})}):null};var A=a(4514);let D=u("folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]),F=u("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),I=u("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]),z=u("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),B=e=>{if(0===e)return"0 Bytes";let t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]},E=e=>{let{isOpen:t,fileId:a,onClose:s}=e,[o,i]=(0,l.useState)(null),[n,d]=(0,l.useState)(!1),[c,m]=(0,l.useState)(null);(0,l.useEffect)(()=>{t&&a&&u()},[t,a]);let u=async()=>{if(a){d(!0),m(null);try{let e=await (0,A.Lp)(a);i(e)}catch(e){m("Failed to load file"),console.error("Error fetching file:",e)}finally{d(!1)}}},h=()=>{if(null==o?void 0:o.path){let e=document.createElement("a");e.href=o.path,e.download=o.name||"download",document.body.appendChild(e),e.click(),document.body.removeChild(e)}},x=e=>{var t;if(e.type&&""!==e.type.trim())return e.type;switch(null===(t=(e.name||e.path||"").split(".").pop())||void 0===t?void 0:t.toLowerCase()){case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"gif":return"image/gif";case"webp":return"image/webp";case"svg":return"image/svg+xml";case"mp4":return"video/mp4";case"webm":return"video/webm";case"avi":return"video/avi";case"mov":return"video/mov";case"pdf":return"application/pdf";case"txt":return"text/plain";case"doc":case"docx":return"application/msword";case"xls":case"xlsx":return"application/vnd.ms-excel";case"ppt":case"pptx":return"application/vnd.ms-powerpoint";default:return console.warn("Unknown file type — full file data:",e),"application/octet-stream"}};return t?(0,r.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-50",onClick:s}),(0,r.jsxs)("div",{className:"relative bg-white rounded-lg shadow-xl max-w-4xl max-h-[90vh] w-full mx-4 flex flex-col",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between border-b border-gray-200",style:{padding:"1rem"},children:[(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-gray-900 truncate",children:n?"Loading...":(null==o?void 0:o.name)||"File Preview"}),o&&(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:[o.size&&"".concat(B(o.size)," • "),x(o)]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 ml-4",children:[o&&(0,r.jsx)("button",{onClick:h,className:"p-2 text-gray-400 hover:text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Download",children:(0,r.jsx)(I,{className:"w-5 h-5"})}),(0,r.jsx)("button",{onClick:s,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:(0,r.jsx)(f,{className:"w-5 h-5"})})]})]}),(0,r.jsxs)("div",{className:"flex-1 overflow-auto p-6",children:[n&&(0,r.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,r.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,r.jsx)("p",{className:"text-gray-500",children:"Loading file..."})]})}),c&&(0,r.jsx)("div",{className:"flex items-center justify-center h-64 text-center",children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("p",{className:"text-red-500",children:c}),(0,r.jsx)("button",{onClick:u,className:"px-4 py-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:"Try Again"})]})}),!n&&!c&&(0,r.jsx)("div",{className:"w-full min-h-[400px] flex items-center justify-center",children:(()=>{var e,t;if(!o)return(0,r.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,r.jsx)("p",{className:"text-gray-500",children:"No file selected"})});let a=x(o);return(0,r.jsx)("div",{className:"w-full",children:(0,r.jsxs)("div",{className:"flex flex-col items-center text-center space-y-4",children:[a.startsWith("image/")?(0,r.jsx)("img",{src:o.path,alt:o.name||"File preview",className:"max-w-full max-h-[500px] object-contain rounded shadow-lg"}):a.startsWith("video/")?(0,r.jsx)("video",{src:o.path,className:"max-w-full max-h-[500px] rounded shadow-lg",controls:!0,playsInline:!0,children:"Your browser does not support the video tag."}):a.includes("pdf")?(0,r.jsx)("iframe",{src:"https://docs.google.com/gview?url=".concat(encodeURIComponent(o.path),"&embedded=true"),className:"w-full h-[500px] rounded shadow-lg",title:o.name||"PDF preview"}):(0,r.jsxs)("div",{className:"flex flex-col items-center",children:[(0,r.jsx)("div",{className:"w-32 h-32 flex items-center justify-center bg-gray-100 rounded shadow-lg",children:(0,r.jsx)("svg",{className:"w-16 h-16 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})})}),(0,r.jsxs)("p",{className:"text-sm text-gray-500 mt-2",children:["Preview not available (",(null===(t=o.name)||void 0===t?void 0:null===(e=t.split(".").pop())||void 0===e?void 0:e.toUpperCase())||"Unknown",")"]})]}),(0,r.jsx)("div",{className:"text-center space-y-2",children:(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:[o.size?B(o.size):"Unknown size"," • ",a]})}),!a.startsWith("image/")&&!a.startsWith("video/")&&!a.includes("pdf")&&(0,r.jsx)("button",{onClick:h,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Download File"})]})})})()})]})]})]}):null},L=e=>{let{viewMode:t,filteredFiles:a,filteredFolders:s,selectedFiles:o,onFileSelect:i,onFolderNavigate:n,onSelectAll:d,onReloadFiles:c}=e,[m,u]=(0,l.useState)(!1),[h,x]=(0,l.useState)(null),p=e=>{if(0===e)return"0 Bytes";let t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]},g=(e,t)=>{t.stopPropagation(),x(e),u(!0)},f=(e,t)=>{t.stopPropagation();let a=document.createElement("a");a.href=e.path,a.download=e.name,document.body.appendChild(a),a.click(),document.body.removeChild(a)},v=(e,t)=>{t.stopPropagation(),(0,A.Ww)(e,c)};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"min-h-[400px]",children:["grid"===t?(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:[s.map(e=>(0,r.jsx)("div",{className:"group relative p-4 border border-gray-3 rounded-lg hover:shadow-md hover:border-blue/50 duration-200 cursor-pointer bg-white",onDoubleClick:()=>n(e.id),children:(0,r.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,r.jsx)(D,{className:"w-12 h-12 text-blue mb-3"}),(0,r.jsx)("h3",{className:"font-medium text-dark text-sm truncate w-full mb-1",children:e.name}),(0,r.jsx)("p",{className:"text-xs text-dark-4",children:e.createdAt.toLocaleDateString()})]})},e.id)),a.map(e=>(0,r.jsxs)("div",{className:"group relative p-4 border rounded-lg hover:shadow-md duration-200 cursor-pointer ".concat(o.includes(e.id)?"border-blue bg-blue/5":"border-gray-3 bg-white hover:border-blue/50"),onClick:()=>i(e.id),children:[(0,r.jsxs)("div",{className:"flex flex-col items-center text-center",children:[e.type.startsWith("image/")?(0,r.jsx)("img",{src:e.path,alt:e.name,className:"h-8 object-cover rounded flex-shrink-0"}):e.type.startsWith("video/")?(0,r.jsx)("video",{src:e.path,className:"h-8 rounded flex-shrink-0 object-cover",muted:!0,loop:!0,playsInline:!0}):e.type.includes("pdf")?(0,r.jsx)("iframe",{src:"https://docs.google.com/gview?url=".concat(encodeURIComponent(e.path),"&embedded=true"),className:"w-12 h-12 rounded mb-3",title:e.name}):(0,r.jsx)("div",{className:" h-8 flex items-center justify-center bg-gray-100 rounded",children:(0,r.jsx)(y,{className:"w-5 h-5 text-gray-500"})}),(0,r.jsx)("h3",{className:"font-medium text-dark text-sm truncate w-full mb-1",children:e.name}),(0,r.jsx)("p",{className:"text-xs text-dark-4",children:p(e.size)})]}),(0,r.jsxs)("div",{className:"absolute top-2 right-2 flex items-center gap-1 opacity-0 group-hover:opacity-100 duration-200",children:[(0,r.jsx)("button",{className:"p-1 bg-gray-600 text-white rounded hover:bg-gray-700",title:"Preview",onClick:t=>g(e.id,t),children:(0,r.jsx)(F,{className:"w-3 h-3"})}),(0,r.jsx)("button",{className:"p-1 bg-green-500 text-white rounded hover:bg-green-600",title:"Download",onClick:t=>f(e,t),children:(0,r.jsx)(I,{className:"w-3 h-3"})}),(0,r.jsx)("button",{className:"p-1 bg-red-500 text-white rounded hover:bg-red-600",title:"Delete",onClick:t=>v(e.id,t),children:(0,r.jsx)(z,{className:"w-3 h-3"})})]}),o.includes(e.id)&&(0,r.jsx)("div",{className:"absolute top-2 left-2 w-4 h-4 bg-blue rounded-full flex items-center justify-center",children:(0,r.jsx)("div",{className:"w-2 h-2 bg-white rounded-full"})})]},e.id))]}):(0,r.jsxs)("div",{className:"bg-white border border-gray-3 rounded-lg overflow-x-auto",children:[(0,r.jsxs)("div",{className:"hidden sm:grid grid-cols-12 gap-4 p-4 bg-gray-1 border-b border-gray-3 font-medium text-dark text-sm",children:[(0,r.jsx)("div",{className:"col-span-1",children:(0,r.jsx)("input",{type:"checkbox",checked:o.length===a.length&&a.length>0,onChange:e=>d(e.target.checked),className:"rounded"})}),(0,r.jsx)("div",{className:"col-span-5",children:"Name"}),(0,r.jsx)("div",{className:"col-span-2",children:"Size"}),(0,r.jsx)("div",{className:"col-span-2",children:"Date"}),(0,r.jsx)("div",{className:"col-span-2",children:"Actions"})]}),s.map(e=>(0,r.jsxs)("div",{onDoubleClick:()=>n(e.id),className:"sm:grid sm:grid-cols-12 gap-4 p-4 border-b border-gray-3 hover:bg-gray-1 duration-200 cursor-pointer flex flex-col sm:flex-row",children:[(0,r.jsx)("div",{className:"sm:col-span-1 hidden sm:block"}),(0,r.jsxs)("div",{className:"sm:col-span-5 flex items-center gap-3",children:[(0,r.jsx)(D,{className:"w-5 h-5 text-blue flex-shrink-0"}),(0,r.jsx)("span",{className:"font-medium text-dark truncate",children:e.name})]}),(0,r.jsx)("div",{className:"sm:col-span-2 text-dark-4 text-sm hidden sm:block",children:"—"}),(0,r.jsx)("div",{className:"sm:col-span-2 text-dark-4 text-sm",children:e.createdAt.toLocaleDateString()})]},e.id)),a.map(e=>(0,r.jsxs)("div",{className:"sm:grid sm:grid-cols-12 gap-4 p-4 border-b border-gray-3 hover:bg-gray-1 duration-200 cursor-pointer flex flex-col sm:flex-row ".concat(o.includes(e.id)?"bg-blue/5":""),children:[(0,r.jsx)("div",{className:"sm:col-span-1",children:(0,r.jsx)("input",{type:"checkbox",checked:o.includes(e.id),onChange:()=>i(e.id),className:"rounded mb-2 sm:mb-0"})}),(0,r.jsxs)("div",{className:"sm:col-span-5 flex items-center gap-3",children:[e.type.startsWith("image/")?(0,r.jsx)("img",{src:e.path,alt:e.name,className:"w-12 h-12 object-cover rounded flex-shrink-0"}):e.type.startsWith("video/")?(0,r.jsx)("video",{src:e.path,className:"w-12 h-12 rounded flex-shrink-0 object-cover",muted:!0,loop:!0,playsInline:!0}):e.type.includes("pdf")?(0,r.jsx)("iframe",{src:"https://docs.google.com/gview?url=".concat(encodeURIComponent(e.path),"&embedded=true"),className:"w-12 h-12 rounded mb-3",title:e.name}):(0,r.jsx)("div",{className:"w-8 h-8 flex items-center justify-center bg-gray-100 rounded",children:(0,r.jsx)(y,{className:"w-5 h-5 text-gray-500"})}),(0,r.jsx)("span",{className:"font-medium text-dark truncate",children:e.name})]}),(0,r.jsx)("div",{className:"sm:col-span-2 text-dark-4 text-sm",children:p(e.size)}),(0,r.jsx)("div",{className:"sm:col-span-2 text-dark-4 text-sm",children:e.uploadDate.toLocaleDateString()}),(0,r.jsxs)("div",{className:"sm:col-span-2 flex items-center gap-2",children:[(0,r.jsx)("button",{className:"p-1 text-gray-600 hover:bg-gray-100 rounded",title:"Preview",onClick:t=>g(e.id,t),children:(0,r.jsx)(F,{className:"w-4 h-4"})}),(0,r.jsx)("button",{className:"p-1 text-green-500 hover:bg-green-50 rounded",title:"Download",onClick:t=>f(e,t),children:(0,r.jsx)(I,{className:"w-4 h-4"})}),(0,r.jsx)("button",{className:"p-1 text-red-500 hover:bg-red-50 rounded",title:"Delete",onClick:t=>v(e.id,t),children:(0,r.jsx)(z,{className:"w-4 h-4"})})]})]},e.id))]}),0===a.length&&0===s.length&&(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)(b,{className:"w-16 h-16 text-dark-4 mx-auto mb-4"}),(0,r.jsx)("h3",{className:"text-lg font-medium text-dark mb-2",children:"No files found"}),(0,r.jsx)("p",{className:"text-dark-4",children:"Try adjusting your search or filter, or upload your first file to get started"})]})]}),(0,r.jsx)(E,{isOpen:m,fileId:h,onClose:()=>{u(!1),x(null)}})]})},O=e=>e.startsWith("image/")?"images":e.startsWith("video/")?"videos":e.includes("pdf")||e.includes("document")||e.includes("text")?"documents":"others",W=()=>{let[e,t]=(0,l.useState)([]),[a,s]=(0,l.useState)([]),[o,i]=(0,l.useState)(null),[n,d]=(0,l.useState)([]),[c,m]=(0,l.useState)("all"),[u,b]=(0,l.useState)(""),[v,y]=(0,l.useState)("grid"),[w,j]=(0,l.useState)(!1),[N,k]=(0,l.useState)(!1),[S,D]=(0,l.useState)(""),F=(0,l.useRef)(null),[I,z]=(0,l.useState)([]),B=(0,l.useRef)(null);console.log("customerDetails:",JSON.parse(localStorage.getItem("customerDetails"))),(0,l.useEffect)(()=>{(async()=>{try{let e=(await (0,A.Uq)()).map(e=>({id:e._id,name:e.originalname,size:e.size,type:e.mimetype,uploadDate:new Date(e.uploadedAt),folderId:"root"!==e.folder?e.folder:void 0,path:e.path,filename:e.filename}));t(e);let a=Array.from(new Set(e.map(e=>e.folderId).filter(e=>e&&"root"!==e))).map(e=>({id:e,name:e,createdAt:new Date}));s(a)}catch(e){console.error("Failed to fetch files",e)}})()},[]);let E=e.filter(e=>{let t=o?e.folderId===o:!e.folderId,a="all"===c||O(e.type)===c,r=e.name.toLowerCase().includes(u.toLowerCase());return t&&a&&r}),W=a.filter(e=>{let t=null===o||"root"===o,a="root"!==e.id,r=e.name.toLowerCase().includes(u.toLowerCase());return t&&a&&r}),q=async()=>{try{let e=(await (0,A.Uq)()).map(e=>({id:e._id,name:e.originalname,size:e.size,type:e.mimetype,uploadDate:new Date(e.uploadedAt),folderId:"root"!==e.folder?e.folder:void 0,path:e.path,filename:e.filename}));t(e);let a=Array.from(new Set(e.map(e=>e.folderId).filter(e=>e&&"root"!==e))).map(e=>({id:e,name:e,createdAt:new Date}));s(a)}catch(e){console.error("Failed to load files",e)}},P=async e=>{let t=e.target.files;if(!t||0===t.length)return;let a=new FormData;Array.from(t).forEach(e=>{a.append("files",e)}),a.append("folder",o||"root");let r=JSON.parse(localStorage.getItem("customerDetails"));a.append("customerId",null==r?void 0:r._id),j(!0),await (0,A.QM)(a),j(!1),q()},U=async e=>{e.preventDefault();let t=e.dataTransfer.files;if(!t||0===t.length)return;let a=new FormData;Array.from(t).forEach(e=>{a.append("files",e)}),a.append("folder",o||"root");let r=JSON.parse(localStorage.getItem("customerDetails"));a.append("customerId",null==r?void 0:r._id),j(!0),await (0,A.QM)(a),j(!1),q()},H=async()=>{if(S.trim())try{if(j(!0),I.length>0){let e=new FormData;I.forEach(t=>{e.append("files",t)}),e.append("folder",S.trim());let t=JSON.parse(localStorage.getItem("customerDetails"));e.append("customerId",null==t?void 0:t._id),await (0,A.QM)(e)}k(!1),D(""),z([]),B.current&&(B.current.value=""),await q()}catch(e){console.error("Failed to create folder with files:",e)}finally{j(!1)}};return(0,r.jsxs)("div",{className:"w-full max-w-7xl mx-auto p-6 bg-white rounded-lg shadow-2 border border-gray-3",children:[(0,r.jsx)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4 mb-6",children:(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-3",style:{paddingTop:"100px"},children:[(0,r.jsxs)("button",{onClick:()=>k(!0),className:"flex items-center gap-2 px-4 py-2 bg-gray-1 text-dark border border-gray-3 rounded-md hover:bg-gray-2 duration-200",children:[(0,r.jsx)(h,{className:"w-4 h-4"}),"New Folder"]}),(0,r.jsxs)("button",{onClick:()=>{var e;return null===(e=F.current)||void 0===e?void 0:e.click()},disabled:w,className:"flex items-center gap-2 px-4 py-2 bg-blue text-white rounded-md hover:bg-blue/90 duration-200 disabled:opacity-50",children:[(0,r.jsx)(x,{className:"w-4 h-4"}),w?"Uploading...":"Upload Files"]}),(0,r.jsx)("input",{type:"file",multiple:!0,ref:F,onChange:P,className:"hidden"})]})}),(0,r.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center gap-4 mb-6 p-4 bg-gray-1 rounded-lg",children:[(0,r.jsx)("div",{className:"w-full max-w-7xl mx-auto p-6",children:(0,r.jsx)(C,{searchTerm:u,onSearchChange:e=>{b(e),console.log("Search term:",e)},fileFilter:c,onFilterChange:e=>{m(e),console.log("Filter changed to:",e)},className:"mb-6"})}),(0,r.jsxs)("div",{className:"flex items-center bg-white border border-gray-3 rounded-md overflow-hidden",children:[(0,r.jsx)("button",{onClick:()=>y("grid"),className:"p-2 duration-200 ".concat("grid"===v?"bg-blue text-white":"text-dark-4 hover:bg-gray-1"),children:(0,r.jsx)(p,{className:"w-4 h-4"})}),(0,r.jsx)("button",{onClick:()=>y("list"),className:"p-2 duration-200 ".concat("list"===v?"bg-blue text-white":"text-dark-4 hover:bg-gray-1"),children:(0,r.jsx)(g,{className:"w-4 h-4"})})]})]}),(0,r.jsx)(M,{currentFolder:o,folders:a,onNavigate:e=>{i(e),console.log("Navigating to folder:",e||"Home")},className:"mb-4 p-3 bg-gray-1 rounded-lg"}),(0,r.jsx)("label",{htmlFor:"drop-upload",children:(0,r.jsxs)("div",{onDragOver:e=>e.preventDefault(),onDrop:U,className:"cursor-pointer border-2 border-dashed border-gray-3 rounded-lg p-8 mb-6 text-center hover:border-blue/50 hover:bg-blue/5 duration-200",children:[(0,r.jsx)(x,{className:"w-12 h-12 text-dark-4 mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-dark-3 mb-2",children:"Drag and drop files here or click to browse"}),(0,r.jsx)("p",{className:"text-dark-4 text-sm",children:"Supports all file types"})]})}),(0,r.jsx)(L,{viewMode:v,filteredFiles:E,filteredFolders:W,selectedFiles:n,onFileSelect:e=>{n.includes(e)?d(t=>t.filter(t=>t!==e)):d(t=>[...t,e])},onFolderNavigate:e=>{i(e)},onSelectAll:e=>{e?d(E.map(e=>e.id)):d([])},onReloadFiles:q}),N&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-2 w-full max-w-md",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-3",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-dark",children:"Create New Folder"}),(0,r.jsx)("button",{onClick:()=>{k(!1),D(""),z([]),B.current&&(B.current.value="")},className:"p-1 text-dark-4 hover:text-dark hover:bg-gray-1 rounded",children:(0,r.jsx)(f,{className:"w-4 h-4"})})]}),(0,r.jsx)("div",{className:"p-4",children:(0,r.jsx)("input",{type:"text",placeholder:"Folder name",value:S,onChange:e=>D(e.target.value),className:"w-full px-4 py-2 border border-gray-3 rounded-md focus:border-blue focus:ring-2 focus:ring-blue/20 focus:outline-none",autoFocus:!0})}),(0,r.jsx)("div",{className:"p-4",children:(0,r.jsx)("input",{type:"file",multiple:!0,ref:B,onChange:e=>{let t=e.target.files;t&&z(Array.from(t))},className:"w-full px-4 py-2 border border-gray-3 rounded-md focus:border-blue focus:ring-2 focus:ring-blue/20 focus:outline-none"})}),I.length>0&&(0,r.jsxs)("div",{className:"p-4 pt-0",children:[(0,r.jsxs)("p",{className:"text-sm text-dark-4 mb-2",children:["Selected files: ",I.length]}),(0,r.jsx)("div",{className:"max-h-32 overflow-y-auto",children:I.map((e,t)=>(0,r.jsx)("div",{className:"text-xs text-dark-4 truncate",children:e.name},t))})]}),(0,r.jsxs)("div",{className:"flex items-center justify-end gap-3 p-4 border-t border-gray-3",children:[(0,r.jsx)("button",{onClick:()=>{k(!1),D(""),z([]),B.current&&(B.current.value="")},className:"px-4 py-2 text-dark-4 hover:bg-gray-1 rounded-md duration-200",disabled:w,children:"Cancel"}),(0,r.jsx)("button",{onClick:H,disabled:!S.trim()||w,className:"px-4 py-2 bg-blue text-white rounded-md hover:bg-blue/90 duration-200 disabled:opacity-50",children:w?"Creating...":"Create"})]})]})})]})};var q=a(3610);let P=()=>{let[e,t]=(0,l.useState)(null);return((0,l.useEffect)(()=>{t(!!localStorage.getItem("token"))},[]),null===e)?null:e?(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,r.jsx)(W,{})}):(0,r.jsx)(q.default,{})}}}]);