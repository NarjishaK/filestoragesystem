exports.id=227,exports.ids=[227],exports.modules={404:(e,t,a)=>{"use strict";a.d(t,{default:()=>q});var s=a(687),r=a(3210);let l=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),d=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase()),i=e=>{let t=d(e);return t.charAt(0).toUpperCase()+t.slice(1)},n=(...e)=>e.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim(),o=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var c={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let m=(0,r.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:a=2,absoluteStrokeWidth:s,className:l="",children:d,iconNode:i,...m},h)=>(0,r.createElement)("svg",{ref:h,...c,width:t,height:t,stroke:e,strokeWidth:s?24*Number(a)/Number(t):a,className:n("lucide",l),...!d&&!o(m)&&{"aria-hidden":"true"},...m},[...i.map(([e,t])=>(0,r.createElement)(e,t)),...Array.isArray(d)?d:[d]])),h=(e,t)=>{let a=(0,r.forwardRef)(({className:a,...s},d)=>(0,r.createElement)(m,{ref:d,iconNode:t,className:n(`lucide-${l(i(e))}`,`lucide-${e}`,a),...s}));return a.displayName=i(e),a},u=h("folder-plus",[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]),x=h("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]),p=h("grid-3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]),g=h("list",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]),f=h("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),b=h("file",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]),v=h("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),y=h("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),j=h("video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]),N=h("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]),w=h("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]),k=h("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),C=({searchTerm:e,onSearchChange:t,fileFilter:a,onFilterChange:l})=>{let[d,i]=(0,r.useState)(!1),n=[{value:"all",label:"All Files",icon:(0,s.jsx)(b,{className:"w-4 h-4"})},{value:"images",label:"Images",icon:(0,s.jsx)(v,{className:"w-4 h-4"})},{value:"documents",label:"Documents",icon:(0,s.jsx)(y,{className:"w-4 h-4"})},{value:"videos",label:"Videos",icon:(0,s.jsx)(j,{className:"w-4 h-4"})},{value:"others",label:"Others",icon:(0,s.jsx)(b,{className:"w-4 h-4"})}];return(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("div",{className:"relative flex-1",children:[(0,s.jsx)(N,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-dark-4"}),(0,s.jsx)("input",{type:"text",placeholder:"Search files and folders...",value:e,onChange:e=>t(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-3 rounded-md focus:border-blue focus:ring-2 focus:ring-blue/20 focus:outline-none"})]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("button",{onClick:()=>i(!d),className:"flex items-center gap-2 px-4 py-2 bg-white border border-gray-3 rounded-md hover:bg-gray-1 duration-200",children:[(0,s.jsx)(w,{className:"w-4 h-4"}),n.find(e=>e.value===a)?.label,(0,s.jsx)(k,{className:`w-4 h-4 duration-200 ${d?"rotate-180":""}`})]}),d&&(0,s.jsx)("div",{className:"absolute top-full left-0 mt-2 w-48 bg-white border border-gray-3 rounded-md shadow-2 z-10 py-2",children:n.map(e=>(0,s.jsxs)("button",{onClick:()=>{l(e.value),i(!1)},className:`w-full flex items-center gap-3 px-4 py-2 text-left hover:bg-gray-1 duration-200 ${a===e.value?"bg-blue/10 text-blue":"text-dark-3"}`,children:[e.icon,e.label]},e.value))})]})]})},M=h("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),S=({currentFolder:e,folders:t,onNavigate:a,className:r="",separator:l=(0,s.jsx)(M,{className:"w-4 h-4 text-dark-4"})})=>{let d=(()=>{let a=[{id:null,name:"Home",isClickable:!0}];if(!e)return a;let s=e=>{let a=t.find(t=>t.id===e);if(!a)return[];let r=[];return a.parentId&&r.push(...s(a.parentId)),r.push({id:a.id,name:a.name,isClickable:!0}),r};return[...a,...s(e)]})();return e?(0,s.jsx)("div",{className:"mb-6",children:(0,s.jsx)("nav",{className:`flex items-center gap-2 text-sm ${r}`,"aria-label":"Breadcrumb",children:(0,s.jsx)("ol",{className:"flex items-center gap-2",children:d.map((e,t)=>{let r=t===d.length-1;return(0,s.jsxs)("li",{className:"flex items-center gap-2",children:[e.isClickable&&!r?(0,s.jsx)("button",{onClick:()=>a(e.id),className:"text-blue hover:underline transition-colors duration-200","aria-current":r?"page":void 0,children:e.name}):(0,s.jsx)("span",{className:r?"text-dark font-medium":"text-dark-4",children:e.name}),!r&&(0,s.jsx)("span",{className:"flex items-center","aria-hidden":"true",children:l})]},e.id||"home")})})})}):null};var D=a(7618);let F=h("folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]),A=h("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),z=h("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]),I=h("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),L=e=>{if(0===e)return"0 Bytes";let t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]},H=({isOpen:e,fileId:t,onClose:a})=>{let[l,d]=(0,r.useState)(null),[i,n]=(0,r.useState)(!1),[o,c]=(0,r.useState)(null);(0,r.useEffect)(()=>{e&&t&&m()},[e,t]);let m=async()=>{if(t){n(!0),c(null);try{let e=await (0,D.Lp)(t);d(e)}catch(e){c("Failed to load file"),console.error("Error fetching file:",e)}finally{n(!1)}}},h=()=>{if(l?.path){let e=document.createElement("a");e.href=l.path,e.download=l.name||"download",document.body.appendChild(e),e.click(),document.body.removeChild(e)}},u=e=>{if(e.type&&""!==e.type.trim())return e.type;let t=e.name||e.path||"";switch(t.split(".").pop()?.toLowerCase()){case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"gif":return"image/gif";case"webp":return"image/webp";case"svg":return"image/svg+xml";case"mp4":return"video/mp4";case"webm":return"video/webm";case"avi":return"video/avi";case"mov":return"video/mov";case"pdf":return"application/pdf";case"txt":return"text/plain";case"doc":case"docx":return"application/msword";case"xls":case"xlsx":return"application/vnd.ms-excel";case"ppt":case"pptx":return"application/vnd.ms-powerpoint";default:return console.warn("Unknown file type — full file data:",e),"application/octet-stream"}};return e?(0,s.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-50",onClick:a}),(0,s.jsxs)("div",{className:"relative bg-white rounded-lg shadow-xl max-w-4xl max-h-[90vh] w-full mx-4 flex flex-col",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between border-b border-gray-200",style:{padding:"1rem"},children:[(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-gray-900 truncate",children:i?"Loading...":l?.name||"File Preview"}),l&&(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:[l.size&&`${L(l.size)} • `,u(l)]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 ml-4",children:[l&&(0,s.jsx)("button",{onClick:h,className:"p-2 text-gray-400 hover:text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Download",children:(0,s.jsx)(z,{className:"w-5 h-5"})}),(0,s.jsx)("button",{onClick:a,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:(0,s.jsx)(f,{className:"w-5 h-5"})})]})]}),(0,s.jsxs)("div",{className:"flex-1 overflow-auto p-6",children:[i&&(0,s.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,s.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,s.jsx)("p",{className:"text-gray-500",children:"Loading file..."})]})}),o&&(0,s.jsx)("div",{className:"flex items-center justify-center h-64 text-center",children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("p",{className:"text-red-500",children:o}),(0,s.jsx)("button",{onClick:m,className:"px-4 py-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:"Try Again"})]})}),!i&&!o&&(0,s.jsx)("div",{className:"w-full min-h-[400px] flex items-center justify-center",children:(()=>{if(!l)return(0,s.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,s.jsx)("p",{className:"text-gray-500",children:"No file selected"})});let e=u(l);return(0,s.jsx)("div",{className:"w-full",children:(0,s.jsxs)("div",{className:"flex flex-col items-center text-center space-y-4",children:[e.startsWith("image/")?(0,s.jsx)("img",{src:l.path,alt:l.name||"File preview",className:"max-w-full max-h-[500px] object-contain rounded shadow-lg"}):e.startsWith("video/")?(0,s.jsx)("video",{src:l.path,className:"max-w-full max-h-[500px] rounded shadow-lg",controls:!0,playsInline:!0,children:"Your browser does not support the video tag."}):e.includes("pdf")?(0,s.jsx)("iframe",{src:`https://docs.google.com/gview?url=${encodeURIComponent(l.path)}&embedded=true`,className:"w-full h-[500px] rounded shadow-lg",title:l.name||"PDF preview"}):(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[(0,s.jsx)("div",{className:"w-32 h-32 flex items-center justify-center bg-gray-100 rounded shadow-lg",children:(0,s.jsx)("svg",{className:"w-16 h-16 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})})}),(0,s.jsxs)("p",{className:"text-sm text-gray-500 mt-2",children:["Preview not available (",l.name?.split(".").pop()?.toUpperCase()||"Unknown",")"]})]}),(0,s.jsx)("div",{className:"text-center space-y-2",children:(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:[l.size?L(l.size):"Unknown size"," • ",e]})}),!e.startsWith("image/")&&!e.startsWith("video/")&&!e.includes("pdf")&&(0,s.jsx)("button",{onClick:h,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Download File"})]})})})()})]})]})]}):null},U=({viewMode:e,filteredFiles:t,filteredFolders:a,selectedFiles:l,onFileSelect:d,onFolderNavigate:i,onSelectAll:n,onReloadFiles:o})=>{let[c,m]=(0,r.useState)(!1),[h,u]=(0,r.useState)(null),x=e=>{if(0===e)return"0 Bytes";let t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]},p=(e,t)=>{t.stopPropagation(),u(e),m(!0)},g=(e,t)=>{t.stopPropagation();let a=document.createElement("a");a.href=e.path,a.download=e.name,document.body.appendChild(a),a.click(),document.body.removeChild(a)},f=(e,t)=>{t.stopPropagation(),(0,D.Ww)(e,o)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"min-h-[400px]",children:["grid"===e?(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:[a.map(e=>(0,s.jsx)("div",{className:"group relative p-4 border border-gray-3 rounded-lg hover:shadow-md hover:border-blue/50 duration-200 cursor-pointer bg-white",onDoubleClick:()=>i(e.id),children:(0,s.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,s.jsx)(F,{className:"w-12 h-12 text-blue mb-3"}),(0,s.jsx)("h3",{className:"font-medium text-dark text-sm truncate w-full mb-1",children:e.name}),(0,s.jsx)("p",{className:"text-xs text-dark-4",children:e.createdAt.toLocaleDateString()})]})},e.id)),t.map(e=>(0,s.jsxs)("div",{className:`group relative p-4 border rounded-lg hover:shadow-md duration-200 cursor-pointer ${l.includes(e.id)?"border-blue bg-blue/5":"border-gray-3 bg-white hover:border-blue/50"}`,onClick:()=>d(e.id),children:[(0,s.jsxs)("div",{className:"flex flex-col items-center text-center",children:[e.type.startsWith("image/")?(0,s.jsx)("img",{src:e.path,alt:e.name,className:"h-8 object-cover rounded flex-shrink-0"}):e.type.startsWith("video/")?(0,s.jsx)("video",{src:e.path,className:"h-8 rounded flex-shrink-0 object-cover",muted:!0,loop:!0,playsInline:!0}):e.type.includes("pdf")?(0,s.jsx)("iframe",{src:`https://docs.google.com/gview?url=${encodeURIComponent(e.path)}&embedded=true`,className:"w-12 h-12 rounded mb-3",title:e.name}):(0,s.jsx)("div",{className:" h-8 flex items-center justify-center bg-gray-100 rounded",children:(0,s.jsx)(y,{className:"w-5 h-5 text-gray-500"})}),(0,s.jsx)("h3",{className:"font-medium text-dark text-sm truncate w-full mb-1",children:e.name}),(0,s.jsx)("p",{className:"text-xs text-dark-4",children:x(e.size)})]}),(0,s.jsxs)("div",{className:"absolute top-2 right-2 flex items-center gap-1 opacity-0 group-hover:opacity-100 duration-200",children:[(0,s.jsx)("button",{className:"p-1 bg-gray-600 text-white rounded hover:bg-gray-700",title:"Preview",onClick:t=>p(e.id,t),children:(0,s.jsx)(A,{className:"w-3 h-3"})}),(0,s.jsx)("button",{className:"p-1 bg-green-500 text-white rounded hover:bg-green-600",title:"Download",onClick:t=>g(e,t),children:(0,s.jsx)(z,{className:"w-3 h-3"})}),(0,s.jsx)("button",{className:"p-1 bg-red-500 text-white rounded hover:bg-red-600",title:"Delete",onClick:t=>f(e.id,t),children:(0,s.jsx)(I,{className:"w-3 h-3"})})]}),l.includes(e.id)&&(0,s.jsx)("div",{className:"absolute top-2 left-2 w-4 h-4 bg-blue rounded-full flex items-center justify-center",children:(0,s.jsx)("div",{className:"w-2 h-2 bg-white rounded-full"})})]},e.id))]}):(0,s.jsxs)("div",{className:"bg-white border border-gray-3 rounded-lg overflow-x-auto",children:[(0,s.jsxs)("div",{className:"hidden sm:grid grid-cols-12 gap-4 p-4 bg-gray-1 border-b border-gray-3 font-medium text-dark text-sm",children:[(0,s.jsx)("div",{className:"col-span-1",children:(0,s.jsx)("input",{type:"checkbox",checked:l.length===t.length&&t.length>0,onChange:e=>n(e.target.checked),className:"rounded"})}),(0,s.jsx)("div",{className:"col-span-5",children:"Name"}),(0,s.jsx)("div",{className:"col-span-2",children:"Size"}),(0,s.jsx)("div",{className:"col-span-2",children:"Date"}),(0,s.jsx)("div",{className:"col-span-2",children:"Actions"})]}),a.map(e=>(0,s.jsxs)("div",{onDoubleClick:()=>i(e.id),className:"sm:grid sm:grid-cols-12 gap-4 p-4 border-b border-gray-3 hover:bg-gray-1 duration-200 cursor-pointer flex flex-col sm:flex-row",children:[(0,s.jsx)("div",{className:"sm:col-span-1 hidden sm:block"}),(0,s.jsxs)("div",{className:"sm:col-span-5 flex items-center gap-3",children:[(0,s.jsx)(F,{className:"w-5 h-5 text-blue flex-shrink-0"}),(0,s.jsx)("span",{className:"font-medium text-dark truncate",children:e.name})]}),(0,s.jsx)("div",{className:"sm:col-span-2 text-dark-4 text-sm hidden sm:block",children:"—"}),(0,s.jsx)("div",{className:"sm:col-span-2 text-dark-4 text-sm",children:e.createdAt.toLocaleDateString()})]},e.id)),t.map(e=>(0,s.jsxs)("div",{className:`sm:grid sm:grid-cols-12 gap-4 p-4 border-b border-gray-3 hover:bg-gray-1 duration-200 cursor-pointer flex flex-col sm:flex-row ${l.includes(e.id)?"bg-blue/5":""}`,children:[(0,s.jsx)("div",{className:"sm:col-span-1",children:(0,s.jsx)("input",{type:"checkbox",checked:l.includes(e.id),onChange:()=>d(e.id),className:"rounded mb-2 sm:mb-0"})}),(0,s.jsxs)("div",{className:"sm:col-span-5 flex items-center gap-3",children:[e.type.startsWith("image/")?(0,s.jsx)("img",{src:e.path,alt:e.name,className:"w-12 h-12 object-cover rounded flex-shrink-0"}):e.type.startsWith("video/")?(0,s.jsx)("video",{src:e.path,className:"w-12 h-12 rounded flex-shrink-0 object-cover",muted:!0,loop:!0,playsInline:!0}):e.type.includes("pdf")?(0,s.jsx)("iframe",{src:`https://docs.google.com/gview?url=${encodeURIComponent(e.path)}&embedded=true`,className:"w-12 h-12 rounded mb-3",title:e.name}):(0,s.jsx)("div",{className:"w-8 h-8 flex items-center justify-center bg-gray-100 rounded",children:(0,s.jsx)(y,{className:"w-5 h-5 text-gray-500"})}),(0,s.jsx)("span",{className:"font-medium text-dark truncate",children:e.name})]}),(0,s.jsx)("div",{className:"sm:col-span-2 text-dark-4 text-sm",children:x(e.size)}),(0,s.jsx)("div",{className:"sm:col-span-2 text-dark-4 text-sm",children:e.uploadDate.toLocaleDateString()}),(0,s.jsxs)("div",{className:"sm:col-span-2 flex items-center gap-2",children:[(0,s.jsx)("button",{className:"p-1 text-gray-600 hover:bg-gray-100 rounded",title:"Preview",onClick:t=>p(e.id,t),children:(0,s.jsx)(A,{className:"w-4 h-4"})}),(0,s.jsx)("button",{className:"p-1 text-green-500 hover:bg-green-50 rounded",title:"Download",onClick:t=>g(e,t),children:(0,s.jsx)(z,{className:"w-4 h-4"})}),(0,s.jsx)("button",{className:"p-1 text-red-500 hover:bg-red-50 rounded",title:"Delete",onClick:t=>f(e.id,t),children:(0,s.jsx)(I,{className:"w-4 h-4"})})]})]},e.id))]}),0===t.length&&0===a.length&&(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)(b,{className:"w-16 h-16 text-dark-4 mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-medium text-dark mb-2",children:"No files found"}),(0,s.jsx)("p",{className:"text-dark-4",children:"Try adjusting your search or filter, or upload your first file to get started"})]})]}),(0,s.jsx)(H,{isOpen:c,fileId:h,onClose:()=>{m(!1),u(null)}})]})},W=e=>e.startsWith("image/")?"images":e.startsWith("video/")?"videos":e.includes("pdf")||e.includes("document")||e.includes("text")?"documents":"others",$=()=>{let[e,t]=(0,r.useState)([]),[a,l]=(0,r.useState)([]),[d,i]=(0,r.useState)(null),[n,o]=(0,r.useState)([]),[c,m]=(0,r.useState)("all"),[h,b]=(0,r.useState)(""),[v,y]=(0,r.useState)("grid"),[j,N]=(0,r.useState)(!1),[w,k]=(0,r.useState)(!1),[M,F]=(0,r.useState)(""),A=(0,r.useRef)(null),[z,I]=(0,r.useState)([]),L=(0,r.useRef)(null);console.log("customerDetails:",JSON.parse(localStorage.getItem("customerDetails"))),(0,r.useEffect)(()=>{(async()=>{try{let e=(await (0,D.Uq)()).map(e=>({id:e._id,name:e.originalname,size:e.size,type:e.mimetype,uploadDate:new Date(e.uploadedAt),folderId:"root"!==e.folder?e.folder:void 0,path:e.path,filename:e.filename}));t(e);let a=Array.from(new Set(e.map(e=>e.folderId).filter(e=>e&&"root"!==e))).map(e=>({id:e,name:e,createdAt:new Date}));l(a)}catch(e){console.error("Failed to fetch files",e)}})()},[]);let H=e.filter(e=>{let t=d?e.folderId===d:!e.folderId,a="all"===c||W(e.type)===c,s=e.name.toLowerCase().includes(h.toLowerCase());return t&&a&&s}),$=a.filter(e=>{let t=null===d||"root"===d,a="root"!==e.id,s=e.name.toLowerCase().includes(h.toLowerCase());return t&&a&&s}),P=async()=>{try{let e=(await (0,D.Uq)()).map(e=>({id:e._id,name:e.originalname,size:e.size,type:e.mimetype,uploadDate:new Date(e.uploadedAt),folderId:"root"!==e.folder?e.folder:void 0,path:e.path,filename:e.filename}));t(e);let a=Array.from(new Set(e.map(e=>e.folderId).filter(e=>e&&"root"!==e))).map(e=>({id:e,name:e,createdAt:new Date}));l(a)}catch(e){console.error("Failed to load files",e)}},q=async e=>{let t=e.target.files;if(!t||0===t.length)return;let a=new FormData;Array.from(t).forEach(e=>{a.append("files",e)}),a.append("folder",d||"root");let s=JSON.parse(localStorage.getItem("customerDetails"));a.append("customerId",s?._id),N(!0),await (0,D.QM)(a),N(!1),P()},B=async e=>{e.preventDefault();let t=e.dataTransfer.files;if(!t||0===t.length)return;let a=new FormData;Array.from(t).forEach(e=>{a.append("files",e)}),a.append("folder",d||"root");let s=JSON.parse(localStorage.getItem("customerDetails"));a.append("customerId",s?._id),N(!0),await (0,D.QM)(a),N(!1),P()},E=async()=>{if(M.trim())try{if(N(!0),z.length>0){let e=new FormData;z.forEach(t=>{e.append("files",t)}),e.append("folder",M.trim());let t=JSON.parse(localStorage.getItem("customerDetails"));e.append("customerId",t?._id),await (0,D.QM)(e)}k(!1),F(""),I([]),L.current&&(L.current.value=""),await P()}catch(e){console.error("Failed to create folder with files:",e)}finally{N(!1)}};return(0,s.jsxs)("div",{className:"w-full max-w-7xl mx-auto p-6 bg-white rounded-lg shadow-2 border border-gray-3",children:[(0,s.jsx)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4 mb-6",children:(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-3",style:{paddingTop:"100px"},children:[(0,s.jsxs)("button",{onClick:()=>k(!0),className:"flex items-center gap-2 px-4 py-2 bg-gray-1 text-dark border border-gray-3 rounded-md hover:bg-gray-2 duration-200",children:[(0,s.jsx)(u,{className:"w-4 h-4"}),"New Folder"]}),(0,s.jsxs)("button",{onClick:()=>A.current?.click(),disabled:j,className:"flex items-center gap-2 px-4 py-2 bg-blue text-white rounded-md hover:bg-blue/90 duration-200 disabled:opacity-50",children:[(0,s.jsx)(x,{className:"w-4 h-4"}),j?"Uploading...":"Upload Files"]}),(0,s.jsx)("input",{type:"file",multiple:!0,ref:A,onChange:q,className:"hidden"})]})}),(0,s.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center gap-4 mb-6 p-4 bg-gray-1 rounded-lg",children:[(0,s.jsx)("div",{className:"w-full max-w-7xl mx-auto p-6",children:(0,s.jsx)(C,{searchTerm:h,onSearchChange:e=>{b(e),console.log("Search term:",e)},fileFilter:c,onFilterChange:e=>{m(e),console.log("Filter changed to:",e)},className:"mb-6"})}),(0,s.jsxs)("div",{className:"flex items-center bg-white border border-gray-3 rounded-md overflow-hidden",children:[(0,s.jsx)("button",{onClick:()=>y("grid"),className:`p-2 duration-200 ${"grid"===v?"bg-blue text-white":"text-dark-4 hover:bg-gray-1"}`,children:(0,s.jsx)(p,{className:"w-4 h-4"})}),(0,s.jsx)("button",{onClick:()=>y("list"),className:`p-2 duration-200 ${"list"===v?"bg-blue text-white":"text-dark-4 hover:bg-gray-1"}`,children:(0,s.jsx)(g,{className:"w-4 h-4"})})]})]}),(0,s.jsx)(S,{currentFolder:d,folders:a,onNavigate:e=>{i(e),console.log("Navigating to folder:",e||"Home")},className:"mb-4 p-3 bg-gray-1 rounded-lg"}),(0,s.jsx)("label",{htmlFor:"drop-upload",children:(0,s.jsxs)("div",{onDragOver:e=>e.preventDefault(),onDrop:B,className:"cursor-pointer border-2 border-dashed border-gray-3 rounded-lg p-8 mb-6 text-center hover:border-blue/50 hover:bg-blue/5 duration-200",children:[(0,s.jsx)(x,{className:"w-12 h-12 text-dark-4 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-dark-3 mb-2",children:"Drag and drop files here or click to browse"}),(0,s.jsx)("p",{className:"text-dark-4 text-sm",children:"Supports all file types"})]})}),(0,s.jsx)(U,{viewMode:v,filteredFiles:H,filteredFolders:$,selectedFiles:n,onFileSelect:e=>{n.includes(e)?o(t=>t.filter(t=>t!==e)):o(t=>[...t,e])},onFolderNavigate:e=>{i(e)},onSelectAll:e=>{e?o(H.map(e=>e.id)):o([])},onReloadFiles:P}),w&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-2 w-full max-w-md",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-3",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-dark",children:"Create New Folder"}),(0,s.jsx)("button",{onClick:()=>{k(!1),F(""),I([]),L.current&&(L.current.value="")},className:"p-1 text-dark-4 hover:text-dark hover:bg-gray-1 rounded",children:(0,s.jsx)(f,{className:"w-4 h-4"})})]}),(0,s.jsx)("div",{className:"p-4",children:(0,s.jsx)("input",{type:"text",placeholder:"Folder name",value:M,onChange:e=>F(e.target.value),className:"w-full px-4 py-2 border border-gray-3 rounded-md focus:border-blue focus:ring-2 focus:ring-blue/20 focus:outline-none",autoFocus:!0})}),(0,s.jsx)("div",{className:"p-4",children:(0,s.jsx)("input",{type:"file",multiple:!0,ref:L,onChange:e=>{let t=e.target.files;t&&I(Array.from(t))},className:"w-full px-4 py-2 border border-gray-3 rounded-md focus:border-blue focus:ring-2 focus:ring-blue/20 focus:outline-none"})}),z.length>0&&(0,s.jsxs)("div",{className:"p-4 pt-0",children:[(0,s.jsxs)("p",{className:"text-sm text-dark-4 mb-2",children:["Selected files: ",z.length]}),(0,s.jsx)("div",{className:"max-h-32 overflow-y-auto",children:z.map((e,t)=>(0,s.jsx)("div",{className:"text-xs text-dark-4 truncate",children:e.name},t))})]}),(0,s.jsxs)("div",{className:"flex items-center justify-end gap-3 p-4 border-t border-gray-3",children:[(0,s.jsx)("button",{onClick:()=>{k(!1),F(""),I([]),L.current&&(L.current.value="")},className:"px-4 py-2 text-dark-4 hover:bg-gray-1 rounded-md duration-200",disabled:j,children:"Cancel"}),(0,s.jsx)("button",{onClick:E,disabled:!M.trim()||j,className:"px-4 py-2 bg-blue text-white rounded-md hover:bg-blue/90 duration-200 disabled:opacity-50",children:j?"Creating...":"Create"})]})]})})]})};var P=a(8608);let q=()=>{let[e,t]=(0,r.useState)(null);return((0,r.useEffect)(()=>{t(!!localStorage.getItem("token"))},[]),null===e)?null:e?(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,s.jsx)($,{})}):(0,s.jsx)(P.default,{})}},4335:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d,metadata:()=>l});var s=a(7413);a(1120);var r=a(4990);let l={title:"Home Page | File Storage system",description:"This is Home Page for File Storage system"},d=()=>(0,s.jsx)("main",{children:(0,s.jsx)(r.default,{})})},4990:(e,t,a)=>{"use strict";a.d(t,{default:()=>s});let s=(0,a(2907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/narjisha/Desktop/filestorage-frontend/src/components/MainPage/index.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/narjisha/Desktop/filestorage-frontend/src/components/MainPage/index.tsx","default")},8096:(e,t,a)=>{Promise.resolve().then(a.bind(a,404))},8368:(e,t,a)=>{Promise.resolve().then(a.bind(a,4990))}};